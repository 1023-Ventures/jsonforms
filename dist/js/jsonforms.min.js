!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";angular.module("jsonForms",["ui.bootstrap","ui.validate","ui.grid","ui.grid.pagination","ui.grid.autoResize","jsonForms.services","jsonForms.directives","jsonForms.label","jsonForms.verticalLayout","jsonForms.horizontalLayout","jsonForms.table","jsonForms.integerControl","jsonForms.booleanControl","jsonForms.stringControl","jsonForms.numberControl","jsonForms.datetimeControl","jsonForms.enumControl"]);var d=angular.module("jsonForms.directives",["jsonForms.services"]),e=function(){function a(a,b,c,d,e){this.RenderService=a,this.ReferenceResolver=b,this.UISchemaGenerator=c,this.$scope=d,this.$q=e;var f=e.defer(),g=e.defer();e.all([this.fetchSchema().promise,this.fetchUiSchema().promise]).then(function(a){var d=a[0],h=a[1],i=e.defer();e.when(i.promise).then(function(a){d.uiSchema=a,b.addUiPathToSchemaRefMapping(JsonRefs.findRefs(a)),JsonRefs.resolveRefs(d,{},function(a,b,c){f.resolve(b),g.resolve(b.uiSchema)})}),void 0===h||null===h||""===h?JsonRefs.resolveRefs(d,{},function(a,b,d){var e=c.generateDefaultUISchema(b);i.resolve(e)}):i.resolve(h)}),e.all([f.promise,g.promise,this.fetchData()]).then(function(b){var c=b[0],e=b[1],f=b[2];d.elements=[a.render(e,c,f,"#",d.asyncDataProvider)]}),d.opened=!1}return a.prototype.fetchSchema=function(){if(this.$scope.schema&&this.$scope.asyncSchema())throw new Error("You cannot specify both the 'schema' and the 'async-schema' attribute at the same time.");if(this.$scope.schema){var a=this.$q.defer();return a.resolve(this.$scope.schema),a}if(this.$scope.asyncSchema())return this.$scope.asyncSchema();throw new Error("Either the 'schema' or the 'async-schema' attribute must be specified.")},a.prototype.fetchUiSchema=function(){if(this.$scope.uiSchema&&this.$scope.asyncUiSchema())throw new Error("You cannot specify both the 'ui-schema' and the 'async-ui-schema' attribute at the same time.");if(this.$scope.uiSchema){var a=this.$q.defer();return a.resolve(this.$scope.uiSchema),a}if(this.$scope.asyncUiSchema())return this.$scope.asyncUiSchema();var a=this.$q.defer();return a.resolve(void 0),a},a.prototype.fetchData=function(){var a=this.$scope.asyncDataProvider,b=this.$scope.data;if(a&&b)throw new Error("You cannot specify both the 'data' and the 'async-data-provider' attribute at the same time.");if(a){var c=a.fetchData();return c.$promise}if(this.$scope.data){var d=this.$q.defer();return d.resolve(this.$scope.data),d.promise}throw new Error("Either the 'data' or the 'async-data-provider' attribute must be specified.")},a.$inject=["RenderService","ReferenceResolver","UISchemaGenerator","$scope","$q"],a}(),f=function(){function a(a){var b=this;this.recursionHelper=a,this.restrict="E",this.replace=!0,this.scope={element:"=",bindings:"=",topOpenDate:"=",topValidateNumber:"=",topValidateInteger:"="},this.templateUrl="templates/element.html",this.compile=function(a,c,d){return b.recursionHelper.compile(a,d)}}return a}();d.directive("control",function(){return{restrict:"E",replace:!0,scope:{control:"=",bindings:"=",topOpenDate:"=",topValidateNumber:"=",topValidateInteger:"="},templateUrl:"templates/control.html"}}).directive("jsonforms",function(){return{restrict:"E",replace:!0,scope:{schema:"=",uiSchema:"=",data:"=",asyncSchema:"&",asyncUiSchema:"&",asyncDataProvider:"="},templateUrl:"templates/form.html",controller:e}}).directive("recelement",["RecursionHelper",function(a){return new f(a)}]).directive("dynamicWidget",["$compile",function(a){return{restrict:"E",scope:{element:"="},replace:!0,link:function(b,c){if(void 0===b.element.templateUrl){var d=a(b.element.template.replace("data-jsonforms-model","ng-model='element.instance[element.path]'"))(b);c.replaceWith(d)}else $.get(b.element.templateUrl,function(d){var e=a(d.replace("data-jsonforms-model","ng-model='element.instance[element.path]'"))(b);c.replaceWith(e)})}}}]);var g=function(){function a(a,b){this.refResolver=a,this.scope=b,this.maxSize=99,this.priority=2}return a.prototype.isApplicable=function(a,b,c){var d=this.refResolver.resolveSchema(b,c);return void 0==d?!1:"Control"==a.type&&"array"==d.type},a.prototype.render=function(a,b,c,d,e){var f=this.createTableUIElement(a,b,c,d,e);return f.tableOptions.gridOptions.data=c,f.schemaType="array",f.label=a.label,void 0===e?f.bindings=c:f.tableOptions.gridOptions.data=this.resolveColumnData(d,c),{type:"Control",elements:[f],size:this.maxSize}},a.prototype.resolveColumnData=function(a,b){return b instanceof Array?b:this.refResolver.resolveUi(b,a)},a.prototype.createTableUIElement=function(a,b,c,d,e){void 0===e&&(e={});var f=void 0!==e.fetchPage,g=!1,h={schemaType:"array"},i=this.refResolver.getSchemaRef(d),j=this,k=this.refResolver.normalize(i),l=a.columns.map(function(a,b){return{field:j.refResolver.normalize(j.refResolver.getSchemaRef(d+"/columns/"+b)).replace(k+"/",""),displayName:a.label}}),m={columns:a.columns,gridOptions:{enableFiltering:g,enablePaginationControls:f,enableColumnResizing:!0,enableAutoResize:!0,columnDefs:l,data:[],useExternalFiltering:!0}};return f&&(m.gridOptions.enablePagination=f,m.gridOptions.useExternalPagination=!0,m.gridOptions.paginationPageSizes=[1,2,3,4,5],m.gridOptions.paginationPageSize=1,m.gridOptions.paginationPage=1),h.enablePaginationControls=function(){m.gridOptions.enablePaginationControls=!0},h.disablePaginationControls=function(){m.gridOptions.enablePaginationControls=!1},h.fetchPagedData=function(a){m.gridOptions.data=this.refResolver.resolve(c,a)},h.fetchFilteredData=function(a){},h.setTotalItems=function(){},m.gridOptions.onRegisterApi=function(a){a.pagination.on.paginationChanged(j.scope,function(a,b){m.gridOptions.paginationPage=a,m.gridOptions.paginationPageSize=b,e.setPageSize(b),e.fetchPage(a,b).$promise.then(function(a,b){m.gridOptions.data=this.resolveColumnData(d,a,l)})})},h.tableOptions=m,h},a.prototype.findSearchTerms=function(a){for(var b=[],c=0;c<a.columns.length;c++){var d=a.columns[c].filters[0].term;void 0!==d&&null!==d&&b.push({column:a.columns[c].name,term:d})}return b},a}(),h=angular.module("jsonForms.table",[]);h.run(["RenderService","ReferenceResolver","$rootScope",function(a,b,c){a.register(new g(b,c))}]);var i=function(){function a(a){this.refResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d,e){var f=this.refResolver.normalize(this.refResolver.getSchemaRef(d)),g=f;return{type:"Control",size:99,id:g,path:f,label:a.label,instance:c,template:'<div class="checkbox-inline">\n            <input type="checkbox" id="'+g+'" class="qb-control qb-control-boolean" data-jsonforms-model/>\n            </div>'}},a.prototype.isApplicable=function(a,b,c){var d=this.refResolver.resolveSchema(b,c);return void 0==d?!1:"Control"==a.type&&"boolean"==d.type},a}(),h=angular.module("jsonForms.booleanControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new i(b))}]);var j=function(){function a(a){this.refResolver=a,this.priority=3}return a.prototype.render=function(a,b,c,d,e){var f=this.refResolver.normalize(this.refResolver.getSchemaRef(d)),g={type:"Control",size:99,id:f,path:f,label:a.label,instance:c,isOpen:!1,templateUrl:"../templates/datetime.html",openDate:function(a){a.preventDefault(),a.stopPropagation(),g.isOpen=!0}};return g},a.prototype.isApplicable=function(a,b,c){var d=this.refResolver.resolveSchema(b,c);return void 0==d?!1:"Control"==a.type&&"string"==d.type&&void 0!=d.format&&"date-time"==d.format},a}(),h=angular.module("jsonForms.datetimeControl",[]);h.run(["RenderService","ReferenceResolver","$rootScope",function(a,b,c){a.register(new j(b))}]);var k=function(){function a(a){this.refResolver=a,this.priority=3}return a.prototype.render=function(a,b,c,d,e){var f=this.refResolver.normalize(this.refResolver.getSchemaRef(d)),g=f,h=a.scope["enum"];return{type:"Control",size:99,id:g,path:f,label:a.label,instance:c,options:h,template:'<select ng-options="option as option for option in element.options" id="'+g+'" class="form-control qb-control qb-control-enum" data-jsonforms-model ></select>'}},a.prototype.isApplicable=function(a,b,c){var d=this.refResolver.resolveSchema(b,c);return void 0==d?!1:"Control"==a.type&&d.hasOwnProperty("enum")},a}(),h=angular.module("jsonForms.enumControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new k(b))}]);var l=function(){function a(a){var b=this;this.renderServ=a,this.priority=1,this.render=function(a,c,d,e,f){for(var g=b,h=function(a){if(void 0===a||0==a.length)return[];var b=e+"/elements/";return a.reduce(function(a,e,h,i){return a.push(g.renderServ.render(e,c,d,b+h,f)),a},[])},i=99,j=h(a.elements),k=j.length,l=Math.floor(i/k),m=0;m<j.length;m++)j[m].size=l;return{type:"HorizontalLayout",elements:j,size:i}}}return a.prototype.isApplicable=function(a,b,c){return"HorizontalLayout"==a.type},a}(),h=angular.module("jsonForms.horizontalLayout",[]);h.run(["RenderService",function(a){a.register(new l(a))}]);var m=function(){function a(a){this.refResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d,e){var f=this.refResolver.normalize(this.refResolver.getSchemaRef(d)),g=f,h={type:"Control",size:99,id:g,path:f,label:a.label,instance:c,template:'<input type="text" id="'+g+'" class="form-control qb-control qb-control-integer" ui-validate="\'element.validate($value)\'" data-jsonforms-model/>',alerts:[],validate:function(a){if(void 0!==a&&null!==a&&(isNaN(a)||""!==a&&!/^\d+$/.test(a))){h.alerts=[];var b={type:"danger",msg:"Must be a valid integer!"};return h.alerts.push(b),!1}return h.alerts=[],!0}};return h},a.prototype.isApplicable=function(a,b,c){var d=this.refResolver.resolveSchema(b,c);return void 0==d?!1:"Control"==a.type&&"integer"==d.type},a}(),h=angular.module("jsonForms.integerControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new m(b))}]);var n=function(){function a(){this.priority=1}return a.prototype.render=function(a,b,c,d,e){var f={};return f.text=a.text,{type:"Custom",elements:[f],size:99}},a.prototype.isApplicable=function(a){return"Label"==a.type},a}(),h=angular.module("jsonForms.label",["jsonForms.services"]);h.run(["RenderService",function(a){a.register(new n)}]);var o=function(){function a(a){this.refResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d,e){var f=this.refResolver.normalize(this.refResolver.getSchemaRef(d)),g=f,h={type:"Control",size:99,id:g,path:f,label:a.label,instance:c,template:'<input type="text" id="'+g+'" class="form-control qb-control qb-control-number" ui-validate="\'element.validate($value)\'" data-jsonforms-model/>',alerts:[{type:"danger",msg:"Must be a valid number!"}],validate:function(a){if(void 0!==a&&null!==a&&isNaN(a)){h.alerts=[];var b={type:"danger",msg:"Must be a valid number!"};return h.alerts.push(b),!1}return h.alerts=[],!0}};return h},a.prototype.isApplicable=function(a,b,c){var d=this.refResolver.resolveSchema(b,c);return void 0==d?!1:"Control"==a.type&&"number"==d.type},a}(),h=angular.module("jsonForms.numberControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new o(b))}]);var p=function(){function a(a){this.refResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d,e){var f=this.refResolver.normalize(this.refResolver.getSchemaRef(d)),g=f;return{type:"Control",size:99,id:g,path:f,label:a.label,instance:c,template:'<input type="text" id="'+g+'" class="form-control qb-control qb-control-string" data-jsonforms-model/>'}},a.prototype.isApplicable=function(a,b,c){var d=this.refResolver.resolveSchema(b,c);return void 0==d?!1:"Control"==a.type&&"string"==d.type},a}(),h=angular.module("jsonForms.stringControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new p(b))}]);var q=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d,e){var f=this,g=function(a){if(void 0===a||0==a.length)return[];var g=d+"/elements/";return a.reduce(function(a,d,h,i){return a.push(f.renderService.render(d,b,c,g+h,e)),a},[])},h=g(a.elements);return{type:"VerticalLayout",elements:h,size:99}},a.prototype.isApplicable=function(a,b,c){return"VerticalLayout"==a.type},a}(),h=angular.module("jsonForms.verticalLayout",["jsonForms.services"]);h.run(["RenderService",function(a){a.register(new q(a))}]);var r;!function(a){var b;!function(a){var b=function(){function a(a){this.json=a,this.type=a.type,this.elements=a.elements}return a}();a.UISchemaElement=b;var c=function(){function a(a,b){var c=this;this.$compile=a,this.refResovler=b,this.renderers=[],this.render=function(a,b,d,e,f,g){for(var h,f=c.refResovler.getSchemaRef(e),i=0;i<c.renderers.length;i++)c.renderers[i].isApplicable(a,b,f)&&(void 0==h||c.renderers[i].priority>h.priority)&&(h=c.renderers[i]);if(void 0===h)throw new Error("No applicable renderer found for element "+JSON.stringify(a));return h.render(a,b,d,e,f,g)},this.register=function(a){c.renderers.push(a)}}return a.$inject=["$compile","ReferenceResolver"],a}();a.RenderService=c;var d=function(){function a(a){var b=this;this.$compile=a,this.pathMapping={},this.Keywords=["items","properties","#"],this.addUiPathToSchemaRefMapping=function(a){for(var c in a)a.hasOwnProperty(c)&&(b.pathMapping[c]=a[c])},this.getSchemaRef=function(a){return"#"==a?"#":b.pathMapping[a+"/scope/$ref"]},this.normalize=function(a){return b.filterNonKeywords(b.toPropertyFragments(a)).join("/")},this.resolveUi=function(a,c){var d=c+"/scope/$ref";return void 0!==b.pathMapping&&b.pathMapping.hasOwnProperty(d)&&(d=b.pathMapping[d]),b.resolveInstance(a,d)},this.resolveInstance=function(a,c){var d=b.toPropertyFragments(b.normalize(c));return d.reduce(function(a,b){return a instanceof Array?a.map(function(a){return a[b]}):a[b]},a)},this.resolveSchema=function(a,c){var d=b.toPropertyFragments(c);return d.reduce(function(a,b){return"#"==b?a:a instanceof Array?a.map(function(a){return a[b]}):a[b]},a)},this.toPropertyFragments=function(a){return a.split("/").filter(function(a){return a.length>0})},this.filterNonKeywords=function(a){var c=b;return a.filter(function(a){return!(-1!==c.Keywords.indexOf(a))})}}return a.$inject=["$compile"],a}();a.ReferenceResolver=d;var e=function(){function a(){var a=this;this.generateDefaultUISchema=function(b){var c=[];return a.generateUISchema(b,c,"#",""),console.log("generated schema: "+JSON.stringify(c[0])),c[0]},this.generateUISchema=function(b,c,d,e){var f=a.deriveType(b);switch(f){case"object":var g={type:"VerticalLayout",elements:[]};if(c.push(g),e&&""!==e){var h={type:"Label",text:a.beautify(e)};g.elements.push(h)}if(!b.properties)return;var i=d+"/properties";for(var j in b.properties)a.isIgnoredProperty(j,b.properties[j])||a.generateUISchema(b.properties[j],g.elements,i+"/"+j,j);break;case"array":var k={type:"HorizontalLayout",elements:[]};c.push(k);var i=d+"/items";if(!b.items)return;if(b.items instanceof Array)for(var l=0;l<b.items.length;l++)a.generateUISchema(b.items[l],k.elements,i+"["+l+"]","");else a.generateUISchema(b.items,k.elements,i,"");break;case"string":case"number":case"integer":case"boolean":var m=a.getControlObject(a.beautify(e),d);c.push(m);break;case"null":break;default:throw new Error("Unknown type: "+JSON.stringify(b))}},this.isIgnoredProperty=function(a,b){return"id"===a&&"string"==typeof b},this.deriveType=function(a){return a.type?a.type:a.properties||a.additionalProperties?"object":"null"},this.getControlObject=function(a,b){return{type:"Control",label:a,scope:{$ref:b}}},this.beautify=function(a){if(a&&a.length>0){var b=a.split(/(?=[A-Z])/).map(function(a){return a.toLowerCase()});return b[0]=b[0].charAt(0).toUpperCase()+b[0].slice(1),b.join(" ")}return a}}return a}();a.UISchemaGenerator=e;var f=function(){function a(a){var b=this;this.$compile=a,this.compile=function(a,c){angular.isFunction(c)&&(c={post:c});var d,e=a.contents().remove(),f=b;return{pre:c&&c.pre?c.pre:null,post:function(a,b){d||(d=f.$compile(e)),d(a,function(a){b.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}return a.$inject=["$compile"],a}();a.RecursionHelper=f}(b=a.services||(a.services={}))}(r||(r={})),angular.module("jsonForms.services",[]).service("RecursionHelper",r.services.RecursionHelper).service("ReferenceResolver",r.services.ReferenceResolver).service("RenderService",r.services.RenderService).service("UISchemaGenerator",r.services.UISchemaGenerator),angular.module("jsonForms").run(["$templateCache",function(a){a.put("templates/datetime.html",'<div class="input-group"><input type="text" datepicker-popup="dd.MM.yyyy" close-text="Close" is-open="element.isOpen" id="control.id" class="form-control qb-control qb-control-datetime" name="control.displayname" data-jsonforms-model> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="element.openDate($event)"><i class="glyphicon glyphicon-calendar"></i></button></span></div>'),a.put("templates/element.html",'<recursive><div ng-if="element.type==\'Label\'" class="col-sm-{{element.size}} qb-label">{{element.elements[0].text}}</div><div ng-if="element.type==\'Control\'" class="col-sm-{{element.size}} form-group top-buffer"><label ng-if="element.label" for="element.id">{{element.label}}</label><alert ng-repeat="alert in element.alerts" type="{{alert.type}}" class="top-buffer-s qb-alert">{{alert.msg}}</alert><dynamic-widget element="element"></div><!--<control ng-if="element.type==\'Control\'"--><!--control="element.elements[0]"--><!--bindings="element.elements[0].bindings"--><!--top-open-date="topOpenDate"--><!--top-validate-number="topValidateNumber"--><!--top-validate-integer="topValidateInteger"--><!--class="col-sm-{{element.size}}">--><!--</control>--><fieldset ng-if="element.type==\'HorizontalLayout\'" class="col-sm-{{element.size}}"><div class="row"><recelement ng-repeat="child in element.elements" element="child" bindings="bindings" top-open-date="topOpenDate" top-validate-number="topValidateNumber" top-validate-integer="topValidateInteger"></recelement></div></fieldset><fieldset ng-if="element.type==\'VerticalLayout\'" class="col-sm-{{element.size}}"><recelement ng-repeat="child in element.elements" element="child" bindings="bindings" top-open-date="topOpenDate" top-validate-number="topValidateNumber" top-validate-integer="topValidateInteger"></recelement></fieldset></recursive>'),a.put("templates/form.html",'<div><form role="form" class="qb-form rounded"><recelement ng-repeat="child in elements" element="child" bindings="bindings" top-open-date="openDate" top-validate-number="validateNumber" top-validate-integer="validateInteger"></recelement></form></div>')}])},{}]},{},[1]);