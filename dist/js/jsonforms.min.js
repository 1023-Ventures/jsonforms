!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";angular.module("jsonForms",["ui.bootstrap","ui.validate","ui.grid","ui.grid.pagination","ui.grid.autoResize","jsonForms.services","jsonForms.directives","jsonForms.label","jsonForms.verticalLayout","jsonForms.horizontalLayout","jsonForms.table","jsonForms.integerControl","jsonForms.booleanControl","jsonForms.stringControl","jsonForms.numberControl","jsonForms.datetimeControl","jsonForms.enumControl"]);var d=angular.module("jsonForms.directives",["jsonForms.services"]),e=function(){function a(a,b,c,d,e){this.RenderService=a,this.ReferenceResolver=b,this.UISchemaGenerator=c,this.$scope=d,this.$q=e;var f=e.defer(),g=e.defer();e.all([this.fetchSchema().promise,this.fetchUiSchema().promise]).then(function(a){var b=a[0],d=a[1],h=e.defer();e.when(h.promise).then(function(a){b.uiSchema=a,JsonRefs.resolveRefs(b,{},function(b,c,d){f.resolve(c),g.resolve(a)})}),void 0===d||null===d||""===d?JsonRefs.resolveRefs(b,{},function(a,b,d){var e=c.generateDefaultUISchema(b);h.resolve(e)}):h.resolve(d)}),e.all([f.promise,g.promise,this.fetchData()]).then(function(b){var c,f=b[0],g=b[1],h=b[2];c=d.asyncDataProvider?d.asyncDataProvider:new r.services.DefaultDataProvider(e,h),a.registerSchema(f),d.elements=[a.render(g,c)]}),d.opened=!1}return a.prototype.fetchSchema=function(){if(this.$scope.schema&&this.$scope.asyncSchema())throw new Error("You cannot specify both the 'schema' and the 'async-schema' attribute at the same time.");if(this.$scope.schema){var a=this.$q.defer();return a.resolve(this.$scope.schema),a}if(this.$scope.asyncSchema())return this.$scope.asyncSchema();throw new Error("Either the 'schema' or the 'async-schema' attribute must be specified.")},a.prototype.fetchUiSchema=function(){if(this.$scope.uiSchema&&this.$scope.asyncUiSchema())throw new Error("You cannot specify both the 'ui-schema' and the 'async-ui-schema' attribute at the same time.");if(this.$scope.uiSchema){var a=this.$q.defer();return a.resolve(this.$scope.uiSchema),a}if(this.$scope.asyncUiSchema())return this.$scope.asyncUiSchema();var a=this.$q.defer();return a.resolve(void 0),a},a.prototype.fetchData=function(){var a=this.$scope.asyncDataProvider,b=this.$scope.data;if(a&&b)throw new Error("You cannot specify both the 'data' and the 'async-data-provider' attribute at the same time.");if(a){var c=a.fetchData();return c}if(this.$scope.data){var d=this.$q.defer();return d.resolve(this.$scope.data),d.promise}throw new Error("Either the 'data' or the 'async-data-provider' attribute must be specified.")},a.$inject=["RenderService","ReferenceResolver","UISchemaGenerator","$scope","$q"],a}(),f=function(){function a(a){var b=this;this.recursionHelper=a,this.restrict="E",this.replace=!0,this.scope={element:"=",bindings:"=",topOpenDate:"=",topValidateNumber:"=",topValidateInteger:"="},this.templateUrl="templates/element.html",this.compile=function(a,c,d){return b.recursionHelper.compile(a,d)}}return a}();d.directive("control",function(){return{restrict:"E",replace:!0,scope:{control:"=",bindings:"=",topOpenDate:"=",topValidateNumber:"=",topValidateInteger:"="},templateUrl:"templates/control.html"}}).directive("jsonforms",function(){return{restrict:"E",replace:!0,scope:{schema:"=",uiSchema:"=",data:"=",asyncSchema:"&",asyncUiSchema:"&",asyncDataProvider:"="},templateUrl:"templates/form.html",controller:e}}).directive("recelement",["RecursionHelper",function(a){return new f(a)}]).directive("dynamicWidget",["$compile",function(a){return{restrict:"E",scope:{element:"="},replace:!0,link:function(b,c){if(b.element.templateUrl)$.get(b.element.templateUrl,function(d){var e=a(d.replace("data-jsonforms-model","ng-model='element.instance[element.path]'"))(b);c.replaceWith(e)});else{var d=a(b.element.template.replace("data-jsonforms-model","ng-model='element.instance[element.path]'"))(b);c.replaceWith(d)}}}}]);var g=function(){function a(a,b){this.refResolver=a,this.scope=b,this.maxSize=99,this.priority=2}return a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&"array"==b.type},a.prototype.render=function(a,b,c,d){var e=this.createTableUIElement(a,d);return d.fetchData().then(function(a){e.tableOptions.gridOptions.data=a}),{label:a.label,type:"Control",tableOptions:e.tableOptions,size:this.maxSize,template:"<div ui-grid=\"element['tableOptions']\"></div>"}},a.prototype.createTableUIElement=function(a,b){var c=void 0!==b.fetchPage,d=!1,e={schemaType:"array"},f=this,g={columns:a.columns,gridOptions:{enableFiltering:d,enablePaginationControls:c,enableColumnResizing:!0,enableAutoResize:!0,data:[],useExternalFiltering:!0}};return c&&(g.gridOptions.enablePagination=c,g.gridOptions.useExternalPagination=!0,g.gridOptions.paginationPageSizes=[1,2,3,4,5],g.gridOptions.paginationPageSize=1,g.gridOptions.paginationPage=1),e.enablePaginationControls=function(){g.gridOptions.enablePaginationControls=!0},e.disablePaginationControls=function(){g.gridOptions.enablePaginationControls=!1},e.setTotalItems=function(){},g.gridOptions.onRegisterApi=function(a){a.pagination.on.paginationChanged(f.scope,function(a,c){g.gridOptions.paginationPage=a,g.gridOptions.paginationPageSize=c,b.setPageSize(c),b.fetchPage(a,c).$promise.then(function(a,b){g.gridOptions.data=a})})},e.tableOptions=g,e},a.prototype.findSearchTerms=function(a){for(var b=[],c=0;c<a.columns.length;c++){var d=a.columns[c].filters[0].term;void 0!==d&&null!==d&&b.push({column:a.columns[c].name,term:d})}return b},a}(),h=angular.module("jsonForms.table",[]);h.run(["RenderService","ReferenceResolver","$rootScope",function(a,b,c){a.register(new g(b,c))}]);var i=function(){function a(a){this.refResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d){return{type:"Control",size:99,label:a.label,path:[this.refResolver.normalize(c)],instance:d.data,template:'<div class="checkbox-inline">\n            <input type="checkbox" id="'+c+'" class="qb-control qb-control-boolean" data-jsonforms-model/>\n            </div>'}},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&"boolean"==b.type},a}(),h=angular.module("jsonForms.booleanControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new i(b))}]);var j=function(){function a(a){this.refResolver=a,this.priority=3}return a.prototype.render=function(a,b,c,d){var e={type:"Control",size:99,label:a.label,path:[this.refResolver.normalize(c)],instance:d.data,isOpen:!1,templateUrl:"../templates/datetime.html",openDate:function(a){a.preventDefault(),a.stopPropagation(),e.isOpen=!0}};return e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&"string"==b.type&&void 0!=b.format&&"date-time"==b.format},a}(),h=angular.module("jsonForms.datetimeControl",[]);h.run(["RenderService","ReferenceResolver","$rootScope",function(a,b,c){a.register(new j(b))}]);var k=function(){function a(a){this.refResolver=a,this.priority=3}return a.prototype.render=function(a,b,c,d){var e=b["enum"],f={type:"Control",size:99,label:a.label,path:[this.refResolver.normalize(c)],instance:d.data,options:e,template:'<select ng-options="option as option for option in element.options" id="'+c+'" class="form-control qb-control qb-control-enum" data-jsonforms-model ></select>'};return f},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&b.hasOwnProperty("enum")},a}(),h=angular.module("jsonForms.enumControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new k(b))}]);var l=function(){function a(a){var b=this;this.renderServ=a,this.priority=1,this.render=function(a,c,d,e){for(var f=b,g=function(a){return void 0===a||0==a.length?[]:a.reduce(function(a,b,c,d){return a.push(f.renderServ.render(b,e)),a},[])},h=99,i=g(a.elements),j=i.length,k=Math.floor(h/j),l=0;l<i.length;l++)i[l].size=k;return{type:"Layout",elements:i,size:h,template:'<fieldset class="col-sm-{{element.size}}">\n                  <div class="row">\n                    <recelement ng-repeat="child in element.elements"\n                                element="child"\n                                bindings="bindings"\n                                top-open-date="topOpenDate"\n                                top-validate-number="topValidateNumber"\n                                top-validate-integer="topValidateInteger">\n                    </recelement>\n                  </div>\n                </fieldset>'}}}return a.prototype.isApplicable=function(a,b,c){return"HorizontalLayout"==a.type},a}(),h=angular.module("jsonForms.horizontalLayout",[]);h.run(["RenderService",function(a){a.register(new l(a))}]);var m=function(){function a(a){this.refResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d){var e={type:"Control",size:99,label:a.label,path:[this.refResolver.normalize(c)],instance:d.data,template:'<input type="text" id="'+c+'" class="form-control qb-control qb-control-integer" ui-validate="\'element.validate($value)\'" data-jsonforms-model/>',alerts:[],validate:function(a){if(void 0!==a&&null!==a&&(isNaN(a)||""!==a&&!/^\d+$/.test(a))){e.alerts=[];var b={type:"danger",msg:"Must be a valid integer!"};return e.alerts.push(b),!1}return e.alerts=[],!0}};return d.fetchData().then(function(a){e.instance=a}),e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&"integer"==b.type},a}(),h=angular.module("jsonForms.integerControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new m(b))}]);var n=function(){function a(a,b){this.refResolver=a,this.scope=b,this.priority=2}return a.prototype.render=function(a,b,c,d){var e={type:"Control",size:99,label:a.label,path:[this.refResolver.normalize(c)],instance:d.data,template:'<input type="text" id="'+c+'" class="form-control qb-control qb-control-number" ui-validate="\'element.validate($value)\'" data-jsonforms-model=""/>',alerts:[{type:"danger",msg:"Must be a valid number!"}],validate:function(a){if(void 0!==a&&null!==a&&isNaN(a)){e.alerts=[];var b={type:"danger",msg:"Must be a valid number!"};return e.alerts.push(b),!1}return e.alerts=[],!0}};return e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&"number"==b.type},a}(),h=angular.module("jsonForms.numberControl",[]);h.run(["RenderService","ReferenceResolver","$rootScope",function(a,b,c){a.register(new n(b,c))}]);var o=function(){function a(a){this.refResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d){var e={type:"Control",size:99,label:a.label,path:[this.refResolver.normalize(c)],instance:d.data,template:'<input type="text" id="'+c+'" class="form-control qb-control qb-control-string" data-jsonforms-model/>',alerts:[]};return d.fetchData().then(function(a){e.instance=a}),e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&"string"==b.type},a}(),h=angular.module("jsonForms.stringControl",[]);h.run(["RenderService","ReferenceResolver",function(a,b){a.register(new o(b))}]);var p=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d){var e=this,f=function(a){return void 0===a||0==a.length?[]:a.reduce(function(a,b,c,f){return a.push(e.renderService.render(b,d)),a},[])},g=f(a.elements);return{type:"Layout",elements:g,size:99,template:'<fieldset class="col-sm-{{element.size}}">\n                    <recelement ng-repeat="child in element.elements"\n                                element="child"\n                                bindings="bindings"\n                                top-open-date="topOpenDate"\n                                top-validate-number="topValidateNumber"\n                                top-validate-integer="topValidateInteger">\n                    </recelement>\n                </fieldset>'}},a.prototype.isApplicable=function(a,b,c){return"VerticalLayout"==a.type},a}(),h=angular.module("jsonForms.verticalLayout",["jsonForms.services"]);h.run(["RenderService",function(a){a.register(new p(a))}]);var q=function(){function a(){this.priority=1}return a.prototype.render=function(a,b,c,d){var e=(a.text,99);return{type:"Widget",size:e,template:' <div class="qb-label">{{text}}</div>'}},a.prototype.isApplicable=function(a){return"Label"==a.type},a}(),h=angular.module("jsonForms.label",["jsonForms.services"]);h.run(["RenderService",function(a){a.register(new q)}]);var r;!function(a){var b;!function(a){var b=function(){function a(a){this.json=a,this.type=a.type,this.elements=a.elements}return a}();a.UISchemaElement=b;var c=function(){function a(a,b){var c=this;this.$q=a,this.data=b,this.setPageSize=function(){},this.fetchPage=function(a,b){var d=c.$q.defer();return d.promise}}return a.prototype.fetchData=function(){var a=this.$q.defer();return a.resolve(this.data),a.promise},a}();a.DefaultDataProvider=c;var d=function(){function a(a){var b=this;this.refResolver=a,this.renderers=[],this.registerSchema=function(a){b.schema=a},this.render=function(a,c){var d,e,f;a.scope&&(e=a.scope.$ref,f=b.refResolver.resolveSchema(b.schema,e));for(var g=0;g<b.renderers.length;g++)b.renderers[g].isApplicable(a,f,e)&&(void 0==d||b.renderers[g].priority>d.priority)&&(d=b.renderers[g]);if(void 0===d)throw new Error("No applicable renderer found for element "+JSON.stringify(a));return d.render(a,f,e,c)},this.register=function(a){b.renderers.push(a)}}return a.$inject=["ReferenceResolver"],a}();a.RenderService=d;var e=function(){function a(a){var b=this;this.$compile=a,this.pathMapping={},this.Keywords=["items","properties","#"],this.addUiPathToSchemaRefMapping=function(a){for(var c in a)a.hasOwnProperty(c)&&(b.pathMapping[c]=a[c])},this.getSchemaRef=function(a){return"#"==a?"#":b.pathMapping[a+"/scope/$ref"]},this.normalize=function(a){return b.filterNonKeywords(b.toPropertyFragments(a)).join("/")},this.resolveUi=function(a,c){var d=c+"/scope/$ref";return void 0!==b.pathMapping&&b.pathMapping.hasOwnProperty(d)&&(d=b.pathMapping[d]),b.resolveInstance(a,d)},this.resolveInstance=function(a,c){var d=b.toPropertyFragments(b.normalize(c));return d.reduce(function(a,b){return a instanceof Array?a.map(function(a){return a[b]}):a[b]},a)},this.resolveSchema=function(a,c){var d=b.toPropertyFragments(c);return d.reduce(function(a,b){return"#"==b?a:a instanceof Array?a.map(function(a){return a[b]}):a[b]},a)},this.toPropertyFragments=function(a){return a.split("/").filter(function(a){return a.length>0})},this.filterNonKeywords=function(a){var c=b;return a.filter(function(a){return!(-1!==c.Keywords.indexOf(a))})}}return a.$inject=["$compile"],a}();a.ReferenceResolver=e;var f=function(){function a(){var a=this;this.generateDefaultUISchema=function(b){var c=[];return a.generateUISchema(b,c,"#",""),console.log("generated schema: "+JSON.stringify(c[0])),c[0]},this.generateUISchema=function(b,c,d,e){var f=a.deriveType(b);switch(f){case"object":var g={type:"VerticalLayout",elements:[]};if(c.push(g),e&&""!==e){var h={type:"Label",text:a.beautify(e)};g.elements.push(h)}if(!b.properties)return;var i=d+"/properties";for(var j in b.properties)a.isIgnoredProperty(j,b.properties[j])||a.generateUISchema(b.properties[j],g.elements,i+"/"+j,j);break;case"array":var k={type:"HorizontalLayout",elements:[]};c.push(k);var i=d+"/items";if(!b.items)return;if(b.items instanceof Array)for(var l=0;l<b.items.length;l++)a.generateUISchema(b.items[l],k.elements,i+"["+l+"]","");else a.generateUISchema(b.items,k.elements,i,"");break;case"string":case"number":case"integer":case"boolean":var m=a.getControlObject(a.beautify(e),d);c.push(m);break;case"null":break;default:throw new Error("Unknown type: "+JSON.stringify(b))}},this.isIgnoredProperty=function(a,b){return"id"===a&&"string"==typeof b},this.deriveType=function(a){return a.type?a.type:a.properties||a.additionalProperties?"object":"null"},this.getControlObject=function(a,b){return{type:"Control",label:a,scope:{$ref:b}}},this.beautify=function(a){if(a&&a.length>0){var b=a.split(/(?=[A-Z])/).map(function(a){return a.toLowerCase()});return b[0]=b[0].charAt(0).toUpperCase()+b[0].slice(1),b.join(" ")}return a}}return a}();a.UISchemaGenerator=f;var g=function(){function a(a){var b=this;this.$compile=a,this.compile=function(a,c){angular.isFunction(c)&&(c={post:c});var d,e=a.contents().remove(),f=b;return{pre:c&&c.pre?c.pre:null,post:function(a,b){d||(d=f.$compile(e)),d(a,function(a){b.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}return a.$inject=["$compile"],a}();a.RecursionHelper=g}(b=a.services||(a.services={}))}(r||(r={})),angular.module("jsonForms.services",[]).service("RecursionHelper",r.services.RecursionHelper).service("ReferenceResolver",r.services.ReferenceResolver).service("RenderService",r.services.RenderService).service("UISchemaGenerator",r.services.UISchemaGenerator),angular.module("jsonForms").run(["$templateCache",function(a){a.put("templates/datetime.html",'<div class="input-group"><input type="text" datepicker-popup="dd.MM.yyyy" close-text="Close" is-open="element.isOpen" id="control.id" class="form-control qb-control qb-control-datetime" name="control.displayname" data-jsonforms-model> <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="element.openDate($event)"><i class="glyphicon glyphicon-calendar"></i></button></span></div>'),a.put("templates/element.html",'<recursive><div ng-if="element.type==\'Widget\'" class="col-sm-{{element.size}} qb-label">{{element.elements[0].text}}</div><div ng-if="element.type==\'Control\'" class="col-sm-{{element.size}} form-group top-buffer"><div class="row"><label ng-if="element.label" for="element.id">{{element.label}}</label></div><div class="row" style="padding-right: 1em"><dynamic-widget element="element"></div><div class="row" style="padding-right: 1em"><alert ng-repeat="alert in element.alerts" type="{{alert.type}}" class="top-buffer-s qb-alert">{{alert.msg}}</alert></div></div><div ng-if="element.type==\'Layout\'" class="col-sm-{{element.size}}"><dynamic-widget element="element"></div><!--<fieldset ng-if="element.type==\'HorizontalLayout\'" class="col-sm-{{element.size}}">--><!--<div class="row">--><!--<recelement ng-repeat="child in element.elements"--><!--element="child"--><!--bindings="bindings"--><!--top-open-date="topOpenDate"--><!--top-validate-number="topValidateNumber"--><!--top-validate-integer="topValidateInteger">--><!--</recelement>--><!--</div>--><!--</fieldset>--><!----><!--<fieldset ng-if="element.type==\'VerticalLayout\'" class="col-sm-{{element.size}}">--><!--<recelement ng-repeat="child in element.elements"--><!--element="child"--><!--bindings="bindings"--><!--top-open-date="topOpenDate"--><!--top-validate-number="topValidateNumber"--><!--top-validate-integer="topValidateInteger">--><!----><!--</recelement>--><!--</fieldset>--></recursive>'),a.put("templates/form.html",'<div><form role="form" class="qb-form rounded"><recelement ng-repeat="child in elements" element="child" bindings="bindings" top-open-date="openDate" top-validate-number="validateNumber" top-validate-integer="validateInteger"></recelement></form></div>')}])},{}]},{},[1]);