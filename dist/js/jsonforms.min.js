"use strict";var JSONForms;!function(a){var b=function(){function b(a,b){var c=this;this.$q=a,this._page=0,this._pageSize=2,this.setPageSize=function(a){c._pageSize=a},this.fetchPage=function(a){c._page=a;var b=c.$q.defer();return c._data instanceof Array?b.resolve(c._data.slice(c._page*c._pageSize,c._page*c._pageSize+c._pageSize)):b.resolve(c._data),b.promise},this._data=b}return b.prototype.getId=function(){return a.ServiceId.DataProvider},b.prototype.getData=function(){return this._data},b.prototype.getPageSize=function(){return this._pageSize},b.prototype.getPage=function(){return this._page},b.prototype.fetchData=function(){var a=this.$q.defer();return a.resolve(this._data),a.promise},b.prototype.getTotalItems=function(){return this._data.length},b.prototype.filter=function(a){return void 0},b}();a.DefaultDataProvider=b;var c=function(){function b(a){this._data=a}return b.prototype.getId=function(){return a.ServiceId.DataProvider},b.prototype.getPageSize=function(){return this._pageSize},b.prototype.getPage=function(){return this._page},b.prototype.getData=function(){return this._data},b.prototype.fetchData=function(){return void 0},b.prototype.fetchPage=function(a){return void 0},b.prototype.filter=function(){return void 0},b.prototype.setPageSize=function(a){},b.prototype.getTotalItems=function(){return this._data.length},b}();a.DefaultInternalDataProvider=c}(JSONForms||(JSONForms={}));var JSONForms;!function(a){var b=function(){function a(){}return a.inits=function(b){var c=a.toPropertyFragments(b);return"/"+c.slice(0,c.length-1).join("/")},a.beautifiedLastFragment=function(b){return a.beautify(a.capitalizeFirstLetter(a.lastFragment(b)))},a.lastFragment=function(a){return a.substr(a.lastIndexOf("/")+1,a.length)},a.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},a.Keywords=["items","properties","#"],a.normalize=function(b){return a.filterNonKeywords(a.toPropertyFragments(b)).join("/")},a.toPropertyFragments=function(a){return a.split("/").filter(function(a){return a.length>0})},a.filterNonKeywords=function(b){return b.filter(function(b){return!(-1!==a.Keywords.indexOf(b))})},a.beautify=function(a){if(a&&a.length>0){var b=a.split(/(?=[A-Z])/).map(function(a){return a.toLowerCase()});return b[0]=b[0].charAt(0).toUpperCase()+b[0].slice(1),b.join(" ")}return a},a}();a.PathUtil=b}(JSONForms||(JSONForms={}));var JSONForms;!function(a){var b=function(){function b(a){this.pathresolver=a,this.map={}}return b.prototype.getId=function(){return a.ServiceId.RuleService},b.prototype.reevaluateRules=function(a){if(a in this.map)for(var b=this.map[a],c=0;c<b.length;c++){var d=b[c],e=null;try{e=this.pathresolver.resolveInstance(d.instance,a)}catch(f){}var g=d.rule.condition.expectedValue===e,h=d.rule.effect,i=!1;i="HIDE"===h&&g||"SHOW"===h&&!g,d.hide=i}},b.prototype.addRuleTrack=function(a){if(void 0!=a.rule){var b=a.rule.condition.scope.$ref;b in this.map||(this.map[b]=[]),this.map[b].push(a),this.reevaluateRules(b)}},b}();a.RuleService=b}(JSONForms||(JSONForms={}));var JSONForms;!function(a){var b=function(){function a(){this.hashes={}}return a.prototype.put=function(a,b){this.hashes[JSON.stringify(a)]=b},a.prototype.get=function(a){return this.hashes[JSON.stringify(a)]},a}(),c=function(){function a(){this.services={}}return a.prototype.add=function(a){this.services[a.getId()]=a},a.prototype.get=function(a){return this.services[a]},a}();a.Services=c;var d=function(){function a(a){this.scope=a}return a.prototype.getId=function(){return h.ScopeProvider},a.prototype.getScope=function(){return this.scope},a}();a.ScopeProvider=d;var e=function(){function a(a){this.resolver=a}return a.prototype.getId=function(){return h.PathResolver},a.prototype.getResolver=function(){return this.resolver},a}();a.PathResolverService=e;var f=function(){function a(a){this.schema=a}return a.prototype.getId=function(){return h.SchemaProvider},a.prototype.getSchema=function(){return this.schema},a}();a.SchemaProvider=f;var g=function(){function a(){this.validationResults=new b}return a.prototype.getId=function(){return h.Validation},a.prototype.getResult=function(a,b){return void 0==this.validationResults.get(a)?void 0:this.validationResults.get(a)[b]},a.prototype.validate=function(a,b){var c=this;if(void 0!=tv4){this.clear(a);var d=tv4.validateMultiple(a,b);d.errors.forEach(function(b){if(-1!=b.schemaPath.indexOf("required")){var d=b.dataPath+"/"+b.params.key;c.validationResults.get(a)[d]="Missing property"}else c.validationResults.get(a)[b.dataPath]=b.message})}},a.prototype.clear=function(a){this.validationResults.put(a,{})},a}();a.ValidationService=g,function(a){a[a.Validation=0]="Validation",a[a.DataProvider=1]="DataProvider",a[a.SchemaProvider=2]="SchemaProvider",a[a.ScopeProvider=3]="ScopeProvider",a[a.RuleService=4]="RuleService",a[a.PathResolver=5]="PathResolver"}(a.ServiceId||(a.ServiceId={}));var h=a.ServiceId}(JSONForms||(JSONForms={}));var JSONForms;!function(a){var b=function(){function a(){var a=this;this.generateDefaultSchema=function(b){return a.schemaObject(b,a.allowAdditionalProperties,a.requiredProperties)},this.generateDefaultSchemaWithOptions=function(b,c,d){return a.schemaObject(b,c,d)},this.schemaObject=function(b,c,d){var e=a.properties(b,c,d);return{type:"object",properties:e,additionalProperties:c(e),required:d(a.keys(e))}},this.properties=function(b,c,d){var e={},f=a;return a.keys(b).forEach(function(a){e[a]=f.property(b[a],c,d)}),e},this.keys=function(a){return Object.keys(a)},this.property=function(b,c,d){switch(typeof b){case"string":case"boolean":return{type:typeof b};case"number":return Number(b)%1===0?{type:"integer"}:{type:"number"};case"object":return a.schemaObjectOrNullOrArray(b,c,d);default:return{}}},this.schemaObjectOrNullOrArray=function(b,c,d){return a.isNotNull(b)?a.isArray(b)?a.schemaArray(b,c,d):a.schemaObject(b,c,d):{type:"null"}},this.schemaArray=function(b,c,d){if(b.length){var e=a,f=b.map(function(a){return e.property(a,c,d)}),g=a.distinct(f,function(a){return JSON.stringify(a)});return 1==g.length?{type:"array",items:g[0]}:{type:"array",items:{oneOf:g}}}},this.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},this.isNotNull=function(a){return"undefined"!=typeof a&&null!==a},this.distinct=function(a,b){var c={};return a.filter(function(a){var d=b(a);return c.hasOwnProperty(d)?!1:c[d]=!0})},this.requiredProperties=function(a){return a},this.allowAdditionalProperties=function(a){return!0}}return a}();a.SchemaGenerator=b}(JSONForms||(JSONForms={}));var JSONForms;!function(a){var b=function(){function b(){var b=this;this.generateDefaultUISchema=function(a){var c=[];return b.generateUISchema(a,c,"#",""),c[0]},this.generateUISchema=function(c,d,e,f){var g=b.deriveType(c);switch(g){case"object":var h={type:"VerticalLayout",elements:[]};if(d.push(h),f&&""!==f){var i={type:"Label",text:a.PathUtil.beautify(f)};h.elements.push(i)}if(!c.properties)return;var j=e+"/properties";for(var k in c.properties)b.isIgnoredProperty(k,c.properties[k])||b.generateUISchema(c.properties[k],h.elements,j+"/"+k,k);break;case"array":var l={type:"HorizontalLayout",elements:[]};d.push(l);var j=e+"/items";if(!c.items)return;if(c.items instanceof Array)for(var m=0;m<c.items.length;m++)b.generateUISchema(c.items[m],l.elements,j+"["+m+"]","");else b.generateUISchema(c.items,l.elements,j,"");break;case"string":case"number":case"integer":case"boolean":var n=b.getControlObject(a.PathUtil.beautify(f),e);d.push(n);break;case"null":break;default:throw new Error("Unknown type: "+JSON.stringify(c))}},this.isIgnoredProperty=function(a,b){return"id"===a&&"string"==typeof b},this.deriveType=function(a){return a.type?a.type:a.properties||a.additionalProperties?"object":"null"},this.getControlObject=function(a,b){return{type:"Control",label:a,scope:{$ref:b}}}}return b}();a.UISchemaGenerator=b}(JSONForms||(JSONForms={}));var JSONForms;!function(a){var b=function(){function b(){var b=this;this.pathMapping={},this.toInstancePath=function(b){return a.PathUtil.normalize(b)},this.resolveUi=function(a,c){var d=c+"/scope/$ref";return void 0!==b.pathMapping&&b.pathMapping.hasOwnProperty(d)&&(d=b.pathMapping[d]),b.resolveInstance(a,d)},this.resolveInstance=function(c,d){var e=a.PathUtil.toPropertyFragments(b.toInstancePath(d));return e.reduce(function(a,b){return a instanceof Array?a.map(function(a){return a[b]}):a[b]},c)},this.resolveSchema=function(b,c){try{var d=a.PathUtil.toPropertyFragments(c);return d.reduce(function(a,b){return"#"==b?a:a instanceof Array?a.map(function(a){return a[b]}):a[b]},b)}catch(e){return void 0}}}return b}();a.PathResolver=b}(JSONForms||(JSONForms={}));var JSONForms;!function(a){var b=function(){function b(a){var b=this;this.refResolver=a,this.renderers=[],this.register=function(a){b.renderers.push(a)}}return b.prototype.render=function(b,c,d){var e,f,g,h=d.get(a.ServiceId.SchemaProvider).getSchema();c.scope&&(f=c.scope.$ref,g=this.refResolver.resolveSchema(h,f));for(var i=0;i<this.renderers.length;i++)this.renderers[i].isApplicable(c,g,f)&&(void 0==e||this.renderers[i].priority>e.priority)&&(e=this.renderers[i]);if(void 0===e)throw new Error("No applicable renderer found for element "+JSON.stringify(c));var j=e.render(c,h,f,d);return d.get(a.ServiceId.ScopeProvider).getScope().$broadcast("modelChanged"),j},b.$inject=["PathResolver"],b}();a.RenderService=b;var c=function(){function b(){}return b.createControlDescription=function(a,b,c,d){return new e(a,b,c,d)},b.renderElements=function(b,c,d){return b.map(function(b){return c.render(d.get(a.ServiceId.ScopeProvider).getScope(),b,d)})},b.createContainerDescription=function(a,b,c,e,f){return new d(a,b,c,e,f)},b}();a.RenderDescriptionFactory=c;var d=function(){function b(b,c,d,e,f){this.size=b,this.elements=c,this.template=d,this.rule=f,this.type="Layout",this.instance=e.get(a.ServiceId.DataProvider).getData(),e.get(a.ServiceId.RuleService).addRuleTrack(this)}return b}();a.ContainerRenderDescription=d;var e=function(){function b(b,c,d,e){this.schemaPath=b,this.rule=e,this.type="Control",this.size=99,this.alerts=[],this.instance=c.get(a.ServiceId.DataProvider).getData(),this.schema=c.get(a.ServiceId.SchemaProvider).getSchema(),this.validationService=c.get(a.ServiceId.Validation),this.pathResolver=c.get(a.ServiceId.PathResolver).getResolver(),this.ruleService=c.get(a.ServiceId.RuleService),this.scope=c.get(a.ServiceId.ScopeProvider).getScope(),this.path=a.PathUtil.normalize(b),this.label=this.createLabel(b,d),this.ruleService.addRuleTrack(this),this.setupModelChangedCallback()}return b.prototype.createLabel=function(b,c){var d="";return d+=c?c:a.PathUtil.beautifiedLastFragment(b),this.isRequired(b)&&(d+="*"),d},b.prototype.isRequired=function(b){var c=a.PathUtil.inits(b),d=a.PathUtil.lastFragment(c);"properties"===d&&(c=a.PathUtil.inits(c));var e=this.pathResolver.resolveSchema(this.schema,c+"/required");return void 0!==e&&-1!=e.indexOf(a.PathUtil.lastFragment(b))?!0:!1},b.prototype.setupModelChangedCallback=function(){var a=this;this.scope.$on("modelChanged",function(){a.validate(),a.ruleService.reevaluateRules(a.schemaPath)})},b.prototype.modelChanged=function(){this.scope.$broadcast("modelChanged")},b.prototype.validate=function(){this.validationService.validate(this.instance,this.schema);var a=this.validationService.getResult(this.instance,"/"+this.path);if(this.alerts=[],void 0!==a){var b={type:"danger",msg:a};this.alerts.push(b)}},b}();a.ControlRenderDescription=e}(JSONForms||(JSONForms={})),function(){angular.module("jsonforms.generators",[]),angular.module("jsonforms.generators.schema",["jsonforms.generators"]),angular.module("jsonforms.generators.schema").service("SchemaGenerator",JSONForms.SchemaGenerator),angular.module("jsonforms.generators.uischema",["jsonforms.generators"]),angular.module("jsonforms.generators.uischema").service("UISchemaGenerator",JSONForms.UISchemaGenerator),angular.module("jsonforms.pathresolver",[]),angular.module("jsonforms.pathresolver").service("PathResolver",JSONForms.PathResolver);angular.module("jsonforms.renderers",["jsonforms.generators","jsonforms.generators.schema","jsonforms.generators.uischema","jsonforms.pathresolver"]);angular.module("jsonforms.renderers").directive("widget",function(){return{restrict:"E",replace:!0,transclude:!0,template:'<div class="col-sm-{{element.size}} jsf-label ng-transclude"></div>'}}).directive("dynamicWidget",["$compile","$templateRequest",function(a,b){var c=function(a,b){var c=[];for(var d in b)c.push("['"+b[d]+"']");var e='ng-model="element.instance'+c.join("")+'"';return b.length>0?a.replace("data-jsonforms-model",e).replace("data-jsonforms-validation","ng-change='element.modelChanged()'"):a};return{restrict:"E",scope:{element:"="},replace:!0,link:function(d,e){var f=void 0!==d.element.path?d.element.path.split("/"):[];if(d.element.templateUrl)b(d.element.templateUrl).then(function(b){var g=c(b,f),h=a(g)(d);e.replaceWith(h)});else{var g=c(d.element.template,f),h=a(g)(d);e.replaceWith(h)}}}}]),angular.module("jsonforms.renderers").service("RenderService",JSONForms.RenderService),angular.module("jsonforms.renderers").service("RenderDescriptionFactory",JSONForms.RenderDescriptionFactory),function(a){a.directive("control",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"components/renderers/controls/control.html"}})}(angular.module("jsonforms.renderers.controls",["jsonforms.renderers"])),function(a){var b=function(){function a(a){this.pathResolver=a,this.maxSize=99,this.priority=2}return a.isExternalFilterAvailable=function(a,b){return void 0!==a.filter&&b.hasOwnProperty("useExternalFiltering")},a.isExternalPagingAvailable=function(a,b){return void 0!==a.fetchPage&&b.hasOwnProperty("useExternalPagination")},a.prototype.defaultGridOptions=function(b,c,d){var e=c.get(JSONForms.ServiceId.DataProvider),f=c.get(JSONForms.ServiceId.Validation),g=c.get(JSONForms.ServiceId.ScopeProvider).getScope(),h=a.isExternalPagingAvailable(e,b),i=a.isExternalFilterAvailable(e,b),j={};return j.totalItems=e.getTotalItems(),j.enableColumnResizing=!0,j.enableHorizontalScrollbar=0,j.enableVerticalScrollbar=0,j.paginationPageSizes=[5,10,20],j.paginationPageSize=5,j.paginationCurrentPage=1,j.enablePaginationControls=!0,h&&(j.useExternalPagination=!0),j.onRegisterApi=function(c){h&&c.pagination.on.paginationChanged(g,function(a,c){j.paginationCurrentPage=a,j.paginationPageSize=c,e.setPageSize(c),e.fetchPage(a).then(function(a){b.data=a})}),i&&c.core.on.filterChanged(g,function(){var d=c.grid.columns,f=d.reduce(function(b,c){var d=c.filters[0].term;return void 0!==d&&d.length>0&&(b[c.field]=a.convertColumnValue(c.colDef,d)),b},{});e.filter(f).then(function(a){b.data=a})}),c.edit.on.afterCellEdit(g,function(b,e,h,i){b[e.field]=a.convertColumnValue(e,h),f.validate(b,d.items),c.core.notifyDataChange("column"),g.$apply()})},this.mergeOptions(b,j)},a.convertColumnValue=function(a,b){if(a.type){if("number"==a.type||"integer"==a.type)return Number(b);if("boolean"==a.type)return Boolean(b)}return b},a.prototype.mergeOptions=function(a,b){return Object.keys(b).reduce(function(a,c){return a.hasOwnProperty(c)?a:(a[c]=b[c],a)},a)},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&void 0!==b&&"array"==b.type},a.prototype.render=function(a,b,c,d){var e=this.createGridOptions(a,d,b,c),f=d.get(JSONForms.ServiceId.DataProvider).getData();return Array.isArray(f)||(f=this.pathResolver.resolveInstance(f,c)),void 0!=f&&(e.data=f),{type:"Control",gridOptions:e,size:this.maxSize,template:'<control><div ui-grid="element[\'gridOptions\']" ui-grid-auto-resize ui-grid-pagination ui-grid-edit class="grid"></div></control>'}},a.prototype.generateColumnDefs=function(a,b){var c=[],d=this.pathResolver.resolveSchema(a,b),e=d.items;if("object"==e.type)for(var f in e.properties)if(e.properties.hasOwnProperty(f)){var g={field:f,displayName:JSONForms.PathUtil.beautify(f)};c.push(g)}return c},a.prototype.createColumnDefs=function(a,b,c){var d=this,e=c.get(JSONForms.ServiceId.Validation);return a.map(function(a){var c=a.href;if(c){var f,g=c.scope,h=d.pathResolver.toInstancePath(a.scope.$ref);if(g){var i=d.pathResolver.toInstancePath(g.$ref);f='<div class="ui-grid-cell-contents">\n                      <a href="#'+c.url+"/{{row.entity."+i+'}}">\n                        {{row.entity.'+h+"}}\n                      </a>\n                    </div>"}else f='<div class="ui-grid-cell-contents">\n                      <a href="#'+c.url+"/{{row.entity."+h+'}}">\n                        {{row.entity.'+h+"}}\n                      </a>\n                </div>";return{cellTemplate:f,field:h,displayName:a.label,enableCellEdit:!1}}var j=d.pathResolver.resolveSchema(b,a.scope.$ref);return{field:d.pathResolver.toInstancePath(a.scope.$ref),displayName:a.label,enableCellEdit:!0,type:j.type,cellClass:function(a,b,c){var d=e.getResult(b.entity,"/"+c.colDef.field);return void 0!=d?"invalidCell":"validCell"}}})},a.prototype.createGridOptions=function(a,b,c,d){var e=this.pathResolver.resolveSchema(c,d),f=a.columns?this.createColumnDefs(a.columns,e,b):this.generateColumnDefs(e,d),g=this.defaultGridOptions(a.options||{},b,c);return g.columnDefs=f,g},a}();a.run(["RenderService","PathResolver",function(a,c){a.register(new b(c))}])}(angular.module("jsonforms.renderers.controls.array",["jsonforms.renderers.controls"])),function(a){var b=function(){function a(){this.priority=2}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.createControlDescription(c,d,a.label,a.rule);return e.template='<control><input type="number" step="1" id="'+c+'" class="form-control jsf-control jsf-control-integer" data-jsonforms-validation data-jsonforms-model/></control>',e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&void 0!==b&&"integer"==b.type},a}();a.run(["RenderService",function(a){a.register(new b)}])}(angular.module("jsonforms.renderers.controls.integer",["jsonforms.renderers.controls"])),function(a){var b=function(){function a(){this.priority=2}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.createControlDescription(c,d,a.label,a.rule);return e.template='<control><input type="checkbox" id="'+c+'" class="jsf-control jsf-control-boolean" data-jsonforms-validation data-jsonforms-model/></control>',e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&void 0!==b&&"boolean"==b.type},a}();a.run(["RenderService",function(a){a.register(new b)}])}(angular.module("jsonforms.renderers.controls.boolean",["jsonforms.renderers.controls"])),function(a){var b=function(){function a(){this.priority=2}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.createControlDescription(c,d,a.label,a.rule);return e.template='<control><input type="text" id="'+c+'" class="form-control jsf-control jsf-control-string" data-jsonforms-model data-jsonforms-validation/></control>',e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&void 0!==b&&"string"==b.type},a.inject=["RenderDescriptionFactory"],a}();a.run(["RenderService",function(a){a.register(new b)}])}(angular.module("jsonforms.renderers.controls.string",["jsonforms.renderers.controls"])),function(a){var b=function(){function a(){this.priority=2}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.createControlDescription(c,d,a.label,a.rule);return e.template='<control><input type="number" step="0.01" id="'+c+'" class="form-control jsf-control jsf-control-number" data-jsonforms-validation data-jsonforms-model/></control>',e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&void 0!==b&&"number"==b.type},a}();a.run(["RenderService",function(a){a.register(new b)}])}(angular.module("jsonforms.renderers.controls.number",["jsonforms.renderers.controls"])),function(a){var b=function(){function a(){this.priority=3}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.createControlDescription(c,d,a.label,a.rule);return e.isOpen=!1,e.openDate=function(a){a.preventDefault(),a.stopPropagation(),e.isOpen=!0},e.template='<control><div class="input-group">\n              <input type="text" datepicker-popup="dd.MM.yyyy" close-text="Close" is-open="element.isOpen" id="'+c+'" class="form-control jsf-control jsf-control-datetime" data-jsonforms-model/>\n                 <span class="input-group-btn">\n                   <button type="button" class="btn btn-default" ng-click="element.openDate($event)">\n                     <i class="glyphicon glyphicon-calendar"></i>\n                   </button>\n                 </span>\n            </div></control>',e},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&void 0!==b&&"string"==b.type&&void 0!=b.format&&"date-time"==b.format},a}();a.run(["RenderService",function(a){a.register(new b)}])}(angular.module("jsonforms.renderers.controls.datetime",["jsonforms.renderers.controls"])),function(a){var b=function(){function a(a){this.pathResolver=a,this.priority=3}return a.prototype.render=function(a,b,c,d){var e=this.pathResolver.resolveSchema(b,c),f=e["enum"],g=JSONForms.RenderDescriptionFactory.createControlDescription(c,d,a.label,a.rule);return g.template='<control><select ng-options="option as option for option in element.options" id="'+c+'" class="form-control jsf-control jsf-control-enum" data-jsonforms-model ></select></control>',g.options=f,g},a.prototype.isApplicable=function(a,b,c){return"Control"==a.type&&void 0!==b&&b.hasOwnProperty("enum")},a}();a.run(["RenderService","PathResolver",function(a,c){a.register(new b(c))}])}(angular.module("jsonforms.renderers.controls.enum",["jsonforms.renderers.controls"])),angular.module("jsonforms.renderers.layouts",["jsonforms.renderers"]),angular.module("jsonforms.renderers.layouts").directive("layout",function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"components/renderers/layouts/layout.html"}}),function(a){var b=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.renderElements(a.elements,this.renderService,d),f='<layout class="jsf-vertical-layout">\n              <fieldset>\n                <dynamic-widget ng-repeat="child in element.elements" element="child">\n                </dynamic-widget>\n             </fieldset>\n            </layout>';return JSONForms.RenderDescriptionFactory.createContainerDescription(99,e,f,d,a.rule)},a.prototype.isApplicable=function(a,b,c){return"VerticalLayout"==a.type},a}();a.run(["RenderService",function(a){a.register(new b(a))}])}(angular.module("jsonforms.renderers.layouts.vertical",["jsonforms.renderers.layouts"])),function(a){var b=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.renderElements(a.elements,this.renderService,d),f=a.label?a.label:"",g='<layout class="jsf-group">\n              <fieldset>\n                <legend>'+f+'</legend>\n                <dynamic-widget ng-repeat="child in element.elements" element="child">\n                </dynamic-widget>\n               </fieldset>\n             </layout>';return JSONForms.RenderDescriptionFactory.createContainerDescription(99,e,g,d,a.rule)},a.prototype.isApplicable=function(a,b,c){return"Group"==a.type},a}();a.run(["RenderService",function(a){a.register(new b(a))}])}(angular.module("jsonforms.renderers.layouts.group",["jsonforms.renderers.layouts"])),function(a){var b=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d){for(var e=99,f=JSONForms.RenderDescriptionFactory.renderElements(a.elements,this.renderService,d),g=f.length,h=Math.floor(e/g),i=0;i<f.length;i++)f[i].size=h;var j='<layout><fieldset>\n                   <div class="row">\n                     <dynamic-widget ng-repeat="child in element.elements" element="child"></dynamic-widget>\n                   </div>\n                 </fieldset></layout>';return JSONForms.RenderDescriptionFactory.createContainerDescription(e,f,j,d,a.rule)},a.prototype.isApplicable=function(a,b,c){return"HorizontalLayout"==a.type},a}();a.run(["RenderService",function(a){a.register(new b(a))}])}(angular.module("jsonforms.renderers.layouts.horizontal",["jsonforms.renderers.layouts"])),angular.module("jsonforms.renderers.layouts.categories",["jsonforms.renderers.layouts"]),function(a){var b=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.renderElements(a.elements,this.renderService,d),f='<layout>\n            <tabset>\n                <dynamic-widget ng-repeat="child in element.elements" element="child"></dynamic-widget>\n            </tabset>\n        </layout>';return JSONForms.RenderDescriptionFactory.createContainerDescription(99,e,f,d,a.rule)},a.prototype.isApplicable=function(a,b,c){return"Categorization"==a.type},a}();a.run(["RenderService",function(a){a.register(new b(a))}])}(angular.module("jsonforms.renderers.layouts.categories.categorization",["jsonforms.renderers.layouts.categories"])),function(a){var b=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.renderElements(a.elements,this.renderService,d),f=a.label,g='<tab heading="'+f+'">\n            <layout>\n                <fieldset>\n                    <dynamic-widget ng-repeat="child in element.elements" element="child"></dynamic-widget>\n                </fieldset>\n            </layout>\n        </tab>';return JSONForms.RenderDescriptionFactory.createContainerDescription(99,e,g,d,a.rule)},a.prototype.isApplicable=function(a,b,c){return"Category"==a.type},a}();a.run(["RenderService",function(a){a.register(new b(a))}])}(angular.module("jsonforms.renderers.layouts.categories.category",["jsonforms.renderers.layouts.categories"])),function(a){var b=function(){function a(){this.priority=1}return a.prototype.render=function(a,b,c,d){var e=a.text,f=99;return{type:"Widget",size:f,template:' <widget><div class="jsf-label">'+e+"</div></widget>"}},a.prototype.isApplicable=function(a){return"Label"==a.type},a}();a.run(["RenderService",function(a){a.register(new b)}])}(angular.module("jsonforms.renderers.extras.label",["jsonforms.renderers"])),function(a){var b=JSONForms.PathResolver,c=function(){function a(a,b,c,d,e,f){this.RenderService=a,this.PathResolver=b,this.UISchemaGenerator=c,this.SchemaGenerator=d,this.$scope=e,this.$q=f,this.isInitialized=!1}return a.prototype.init=function(){var a=this;if(this.isInitialized){var c=angular.element(this.$scope.element.find("form")).children();c.remove()}this.isInitialized=!0;var d=this.$q.defer(),e=this.$q.defer();this.$q.all([this.fetchSchema().promise,this.fetchUiSchema().promise]).then(function(b){var c=b[0],f=b[1],g=a.$q.defer();a.$q.when(g.promise).then(function(a){JsonRefs.resolveRefs(c,{},function(b,c){d.resolve(c),e.resolve(a)})}),void 0===f||null===f||""===f?JsonRefs.resolveRefs(c,{},function(b,c,d){var e=a.UISchemaGenerator.generateDefaultUISchema(c);g.resolve(e)}):g.resolve(f)}),this.$q.all([d.promise,e.promise,this.fetchData()]).then(function(c){var d=c[0],e=c[1],f=c[2],g=new JSONForms.Services;g.add(new JSONForms.PathResolverService(new b)),g.add(new JSONForms.ScopeProvider(a.$scope)),g.add(new JSONForms.SchemaProvider(d)),g.add(new JSONForms.ValidationService),g.add(new JSONForms.RuleService(a.PathResolver));var h;h=a.$scope.asyncDataProvider?a.$scope.asyncDataProvider:new JSONForms.DefaultDataProvider(a.$q,f),g.add(h),a.$scope.elements=[a.RenderService.render(a.$scope,e,g)]})},a.prototype.fetchSchema=function(){if(this.$scope.schema&&this.$scope.asyncSchema())throw new Error("You cannot specify both the 'schema' and the 'async-schema' attribute at the same time.");if(this.$scope.schema){var a=this.$q.defer();return a.resolve(this.$scope.schema),a}if(this.$scope.asyncSchema())return this.$scope.asyncSchema();if(this.$scope.data){var a=this.$q.defer();return a.resolve(this.SchemaGenerator.generateDefaultSchema(this.$scope.data)),a}throw new Error("Either the 'schema' or the 'async-schema' attribute must be specified.")},a.prototype.fetchUiSchema=function(){if(this.$scope.uiSchema&&this.$scope.asyncUiSchema())throw new Error("You cannot specify both the 'ui-schema' and the 'async-ui-schema' attribute at the same time.");if(this.$scope.uiSchema){var a=this.$q.defer();return a.resolve(this.$scope.uiSchema),a}if(this.$scope.asyncUiSchema())return this.$scope.asyncUiSchema();var a=this.$q.defer();return a.resolve(void 0),a},a.prototype.fetchData=function(){var a=this.$scope.asyncDataProvider,b=this.$scope.data;if(a&&b)throw new Error("You cannot specify both the 'data' and the 'async-data-provider' attribute at the same time.");if(a)return a.fetchData();if(this.$scope.data){var c=this.$q.defer();return c.resolve(this.$scope.data),c.promise}throw new Error("Either the 'data' or the 'async-data-provider' attribute must be specified.")},a.$inject=["RenderService","PathResolver","UISchemaGenerator","SchemaGenerator","$scope","$q"],a}();a.directive("jsonforms",function(){return{restrict:"E",replace:!0,scope:{schema:"=",uiSchema:"=",data:"=",asyncSchema:"&",asyncUiSchema:"&",asyncDataProvider:"="},templateUrl:"components/form/form.html",controller:c,link:function(a,b,c,d){a.element=b,a.$watch("uiSchema",function(){d.init()}),a.$watch("data",function(){d.init()})}}})}(angular.module("jsonforms.form",["jsonforms.generators","jsonforms.generators.schema","jsonforms.generators.uischema","jsonforms.pathresolver","jsonforms.renderers","jsonforms.renderers.controls","jsonforms.renderers.controls.array","jsonforms.renderers.controls.integer","jsonforms.renderers.controls.boolean","jsonforms.renderers.controls.string","jsonforms.renderers.controls.number","jsonforms.renderers.controls.datetime","jsonforms.renderers.controls.enum","jsonforms.renderers.layouts","jsonforms.renderers.layouts.vertical","jsonforms.renderers.layouts.group","jsonforms.renderers.layouts.horizontal","jsonforms.renderers.layouts.categories","jsonforms.renderers.layouts.categories.categorization","jsonforms.renderers.layouts.categories.category","jsonforms.renderers.extras.label"])),function(a){a.directive("autocomplete",function(a){return function(b,c,d){$(c).autocomplete({source:b.element.suggestion,select:function(){a(function(){$(c).trigger("input")},0)}}).autocomplete("widget").addClass("jsf-control-autocomplete")}});var b=function(){function a(){this.priority=3}return a.prototype.render=function(a,b,c,d){var e=new JSONForms.ControlRenderDescription(c,d,a.label,a.rule);return e.template='<control><input type="text" autocomplete id="'+c+'" class="form-control jsf-control jsf-control-string" data-jsonforms-model data-jsonforms-validation/></control>',e.suggestion=a.suggestion,e},a.prototype.isApplicable=function(a,b,c){var d="Control"==a.type&&a.hasOwnProperty("suggestion");return d},a}();a.run(["RenderService",function(a){a.register(new b)}])}(angular.module("jsonforms.renderers.controls.autocomplete",["jsonforms.renderers.controls"])),function(a){var b=function(){function a(a){this.pathResolver=a,this.priority=2}return a.prototype.render=function(a,b,c,d){var e=new JSONForms.ControlRenderDescription(c,d,a.label,a.rule),f=this.pathResolver.toInstancePath(c),g=a.label?a.label:"Go to ",h=a.href.label?a.href.label:e.label,i=d.get(JSONForms.ServiceId.DataProvider).getData();return e.template="<div>"+g+' <a href="#'+a.href.url+"/"+i[f]+'">'+h+"</a></div>",e},a.prototype.isApplicable=function(a,b,c){return"ReferenceControl"==a.type},a}();a.run(["RenderService","PathResolver",function(a,c){a.register(new b(c))}])}(angular.module("jsonforms.renderers.controls.reference",["jsonforms.renderers.controls"])),angular.module("jsonforms.renderers.layouts.masterdetail",["jsonforms.renderers.layouts"]),angular.module("jsonforms.renderers.layouts.masterdetail").directive("masterdetailCollection",function(){
return{restrict:"E",replace:!0,scope:{collection:"=",element:"="},template:'\n        <div>\n            <accordion close-others="false">\n                <accordion-group is-open="status_attribute.open" ng-repeat="(key, value) in element.filter(collection)">\n                    <accordion-heading>\n                        {{key}} <i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status_attribute.open, \'glyphicon-chevron-right\': !status_attribute.open}"></i>\n                    </accordion-heading>\n                    <accordion close-others="false">\n                        <accordion-group is-open="status_object.open" ng-repeat="child in element.instance[key]">\n                            <accordion-heading>\n                                <span ng-click="element.selectedChild=child;element.selectedSchema=value.items;">{{child.name}}<!-- label provider needed --></span><i class="pull-right glyphicon" ng-class="{\'glyphicon-chevron-down\': status_object.open, \'glyphicon-chevron-right\': !status_object.open}"></i>\n                            </accordion-heading>\n                            <masterdetail-member element="element" member="value.items"></masterdetail-member>\n                        </accordion-group>\n                    </accordion>\n                </accordion-group>\n            </accordion>\n        </div>\n        '}}).directive("masterdetailMember",function(a){return{restrict:"E",replace:!0,scope:{member:"=",element:"="},link:function(b,c,d){a('<masterdetail-collection collection="member.properties" element="element"></masterdetail-collection>')(b,function(a,b){c.replaceWith(a)})}}});var a=function(){function a(a){this.renderService=a,this.priority=1}return a.prototype.render=function(a,b,c,d){var e=JSONForms.RenderDescriptionFactory.createControlDescription(c,d,"");return e.template='\n        <div class="row">\n            <!-- Master -->\n            <div class="col-sm-30">\n                <masterdetail-collection element="element" collection="element.schema.properties"></masterdetail-collection>\n            </div>\n            <!-- Detail -->\n            <div class="col-sm-70">\n                <jsonforms schema="element.selectedSchema" data="element.selectedChild" ng-if="element.selectedChild"></jsonforms>\n            </div>\n        </div>\n        ',e.schema=b,e.filter=function(a){var b={};return angular.forEach(a,function(a,c){"array"==a.type&&"object"==a.items.type&&(b[c]=a)}),b},e},a.prototype.isApplicable=function(a,b,c){return"MasterDetailLayout"==a.type&&void 0!==b&&"object"==b.type},a}();angular.module("jsonforms.renderers.layouts.masterdetail").run(["RenderService",function(b){b.register(new a(b))}])}(),angular.module("jsonforms",["ui.bootstrap","ui.validate","ui.grid","ui.grid.autoResize","ui.grid.edit","ui.grid.pagination","jsonforms.form","jsonforms.generators","jsonforms.generators.schema","jsonforms.generators.uischema","jsonforms.pathresolver","jsonforms.renderers","jsonforms.renderers.controls","jsonforms.renderers.controls.autocomplete","jsonforms.renderers.controls.array","jsonforms.renderers.controls.integer","jsonforms.renderers.controls.boolean","jsonforms.renderers.controls.reference","jsonforms.renderers.controls.string","jsonforms.renderers.controls.number","jsonforms.renderers.controls.datetime","jsonforms.renderers.controls.enum","jsonforms.renderers.layouts","jsonforms.renderers.layouts.vertical","jsonforms.renderers.layouts.horizontal","jsonforms.renderers.layouts.categories","jsonforms.renderers.layouts.categories.categorization","jsonforms.renderers.layouts.categories.category","jsonforms.renderers.extras.label","jsonforms.renderers.layouts.masterdetail"]),angular.module("jsonforms").run(["$templateCache",function(a){a.put("components/form/form.html",'<div><form role="form" class="jsf-form rounded"><dynamic-widget ng-repeat="child in elements" element="child"></dynamic-widget></form></div>'),a.put("components/renderers/controls/control.html",'<div class="col-sm-{{element.size}} form-group top-buffer" ng-hide="element.hide"><div class="row"><label ng-if="element.label" for="element.id">{{element.label}}</label></div><div class="row" style="padding-right: 1em" ng-transclude></div><div class="row" style="padding-right: 1em"><alert ng-repeat="alert in element.alerts" type="{{alert.type}}" class="top-buffer-s jsf-alert">{{alert.msg}}</alert></div></div>'),a.put("components/renderers/layouts/layout.html",'<div class="col-sm-{{element.size}}" ng-hide="element.hide" ng-transclude></div>')}]);